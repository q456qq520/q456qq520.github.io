
<!DOCTYPE html>
<html lang="zh-CN">
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta HTTP-EQUIV="pragma" CONTENT="no-cache"> 
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<meta HTTP-EQUIV="expires" CONTENT="0"> 
<title>流程引擎 | LIKECAT</title>	

<link rel="stylesheet" href="https://q456qq520.github.io/styles/main.css">
<script type="text/javascript">
function getCSS()
{
        datetoday = new Date();
        timenow=datetoday.getTime();
        datetoday.setTime(timenow);
        thehour = datetoday.getHours();

        if (thehour<07)

            display = "https://q456qq520.github.io/media/css/night.css";

       else if (thehour>18)

            display = "https://q456qq520.github.io/media/css/night.css";   

        else if (thehour>07)
           
            display = "https://q456qq520.github.io/media/css/day.css";

        else if (thehour<18)

            display = "https://q456qq520.github.io/media/css/day.css";
      

var css = '<';
        css+='link rel="stylesheet" href='+display+' \/';
        css+='>';
        document.write(css);
}
</script>
<link href="https://fonts.googleapis.com/css?family=Dancing+Script|Noto+Sans+SC:300|Montserrat&display=swap" rel="stylesheet">
<link href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" rel="stylesheet" />
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<script type='text/javascript' src='https://q456qq520.github.io/media/scripts/script.js'></script>
<link href="https://cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet" />
  <script src="https://cdn.bootcss.com/wow/1.1.2/wow.min.js"></script>
  <script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>wow=new WOW({boxClass:'wow',animateClass:'animated',offset:0,mobile:true,live:true});wow.init();</script>

<script type="text/javascript">
window.onload=getCSS();
</script>


 	
</head>
<body class="post-template-default single single-post postid-70 single-format-standard">
    <div id="wrapper">
        
			
		<header id="header" class="site-header" 
		
		>
			<div class="site-branding">
									<h1 class="site-title"><a href="https://q456qq520.github.io" rel="home">LIKECAT</a></h1>
										
					<h2 class="site-description">一条小咸鱼</h2>
										
							</div>
			<nav id="nav-wrapper">
				<div class="container">
					<div class="nav-toggle">
						<div class="bars">
							<div class="bar"></div>
							<div class="bar"></div>
							<div class="bar"></div>
						</div>
					</div>
					<div class="clear"></div>
					<ul id="" class="dove">
		 
     			
<li>
	 
	<a  href="/"> 首页</a></li>
	
    
     			
<li>
	 
	<a  href="/archives"> 归档</a></li>
	
    
     			
<li>
	 
	<a  href="/tags"> 标签</a></li>
	
    
     			
<li>
	 
	<a  href="/post/about"> 关于</a></li>
	
    
     			
<li>
	 
	<a  href="https://q456qq520.github.io/tag/CH4G4OVER/"> 设计模式</a></li>
	
    
     			
<li>
	 
	<a  href="https://q456qq520.github.io/tag/fenbushi/"> 分布式</a></li>
	
    

</ul>
</li>		
		
</ul>				</div>
			</nav>
						<div class="jingge">


    

    

    

    

    

    

    

    

    

    

    

    
        </header>

		<div id="content" class="container">
			<div class="row">
	<div class="col-md-8 site-main">
				
<article id="post-70" class="post-70 post type-post status-publish format-standard hentry category-5 tag-10 tag-9 tag-11">

	
	                      
		<div class="entry-content">
			<h1 class="wow swing entry-title">流程引擎</h1>
<div class="entry-meta">
<div class="wow bounce">
	<i class="iconfont icon-rili"> <time class="lately-a" datetime="2022-03-17 16:12:22" itemprop="datePublished" pubdate="">2022-03-17</time></i>
	          </div>
			
</span>
													 
		</div>
                  
			<div class="wow slideInLeft entry-summary song">
				<h1 id="流程概念">流程概念</h1>
<h2 id="流程的定义">流程的定义</h2>
<p>维基百科：对工作流程及其各操作步骤之间业务规则的抽象、概括描述。即将工作流程中的工作如何前后组织在一起的逻辑和规则。</p>
<p>流程就是一组活动按照一定的顺序组成的序列流，其顺序可能是串行的、并行的，或者两者的组合模式</p>
<p>流程一般具备六个要素：输入、活动、活动间的相互作用、输出、流程的服务对象和价值。</p>
<ul>
<li>输入：是运作流程所必须的资源</li>
<li>输出：流程运作的结果</li>
<li>活动：是流程运作的环节</li>
<li>活动间的相互作用：是环节之间的关系，把流程从头尾串联起来</li>
<li>价值：是流程运作为流程的服务对象带来的好处</li>
<li>流程的服务对象：是流程服务的对象，也叫做流程的下一个环节</li>
</ul>
<h1 id="为什么要用流程引擎">为什么要用流程引擎</h1>
<h2 id="工作流程常见问题">工作流程常见问题</h2>
<ol>
<li>
<p>做需求时考虑不周全，上线后不断修改流程。</p>
</li>
<li>
<p>组织架构调整，产生业务流程变更。</p>
</li>
<li>
<p>业务流程比较复杂，使用的状态很多。</p>
</li>
<li>
<p>工作流业务耦合度太高，很多场景不适用。</p>
</li>
</ol>
<h2 id="例子">例子</h2>
<p>假定我们有一个支付订单状态需要维护，它的状态图如下：</p>
<p>它的状态跃迁自左向右，清晰名了，而且没有处理角色的概念，此时我们使用代码控制好状态流转即可，无需使用框架。</p>
<figure data-type="image" tabindex="1"><img src="https://q456qq520.github.io/post-images/1647572517222.png" alt="流程1" loading="lazy"></figure>
<p>假设有一天流程变更为下图所示：</p>
<figure data-type="image" tabindex="2"><img src="https://q456qq520.github.io/post-images/1647572617376.png" alt="流程2" loading="lazy"></figure>
<p>如果是开发人员，看到的则是：</p>
<pre><code>public function doSomething(int case){
   if(case == 0){
       //业务逻辑
       retutn;
   }
    if(case == 1){
       //业务逻辑
       retutn;
   }
    if(case == 2){
       //业务逻辑
       retutn;
   }
   .
   .
   .
}
</code></pre>
<p>这个采购订单的状态复杂多变，状态的转换不稳定性很强，随时有可能增加新的状态；而且不同状态的处理人也是不同的，存在权限管理功能，若此时我们仍然使用一个状态字段来维持状态变更，无疑会困难重重。</p>
<p>复杂繁多的业务流程如果采用 if else 实现那将是崩溃的，代码不可维护，业务流程在代码中可读性很差，所以就有了业务流程模型图示 BPMN2.0 规范，我们要做到就是把业务场景抽象为标准流程图，把流程图丢到流程引擎中按流程定义约定逐步流转，很显然扩展性和业务可描述性会好很多，所以工作流引擎主要用于解决复杂的业务。</p>
<h2 id="流程引擎适用场景">流程引擎适用场景</h2>
<ol>
<li>
<p>状态的个数及其稳定性，个数多且不稳定，适合使用工作流引擎。</p>
</li>
<li>
<p>每个状态的处理人，处理人角色多且不稳定，适合使用工作流引擎。</p>
</li>
</ol>
<h2 id="流程引擎优缺点">流程引擎优缺点</h2>
<h3 id="优点">优点</h3>
<pre><code>- 具有可视化的流程设计工具
- 业务数据和流程数据的分离，可以进行更专注的性能优化，业务划分
- 内置API能很好的完成常见的功能场景
- 具有完善的流程监控体系
- 具备大量的自定义扩展接口
</code></pre>
<h1 id="工作流规范简介">工作流规范简介</h1>
<p>20 世纪 70 年代中期，工作流出现并运用于办公自动化领域，使流程管理技术第一次有了系统的技术规范。20 世纪 80 年代 初期，工作流伴随着 OA 系统走向商用，但是应用范围有限。至 80 年代后期，OA 系统的研究被群件和工作流管理系统所代替。20 世纪 90 年代以后，相关技术逐渐成熟，工作流管理联盟(WfMC)成立并发布了工作流参考模型。进入 21 世纪， BPM 更进一步发展。SOA 的出现使得流程管理技术从工作流转向业务流，基于此的一系列规范也相应被推出。</p>
<figure data-type="image" tabindex="3"><img src="https://q456qq520.github.io/post-images/1647574593657.png" alt="流程管理技术发展时间线" loading="lazy"></figure>
<h2 id="bpmn20-规范">BPMN2.0 规范</h2>
<p>业务流程模型和标记法（BPMN, Business Process Model and Notation）是一套图形化表示法，用于以图形的方式详细说明各种业务流程。</p>
<p>它最初由业务流程管理倡议组织（BPMI, Business Process Management Initiative）开发，名称为”Business Process Modeling Notation”，即“业务流程建模标记法”。BPMI 于 2005 年与对象管理组织（OMG, Object Management Group）合并。2011 年 1 月 OMG 发布 2.0 版本（时至今日，没人会用 1.0 版本了），同时改为现在的名称。</p>
<p>BPMN2.0 规范的实现，实质上是一个按照特定规范编写的 XML 文件，使用特定的 BPMN 设计器，即可以图形化的形式查看和编辑该文件。Camunda，Activiti，Flowable 等主流的 java 开源流程引擎，以代码的形式实现了这套图形化表示法，使任务的流转依赖图形，而非具体的实现代码。</p>
<figure data-type="image" tabindex="4"><img src="https://q456qq520.github.io/post-images/1647574956600.png" alt="BPMN2.0规范图1" loading="lazy"></figure>
<h1 id="开源流程引擎">开源流程引擎</h1>
<p>目前 java 主流的开源流程引擎，有 jBPM，Activiti，Camunda，Flowable 等</p>
<p>Activiti<br>
Activiti 由 Alfresco 公司开发，目前最高版本为 Activiti cloud 7.1.0。其中 activiti5 和 activiti6 的核心 leader 是 Tijs Rademakers，由于团队内部分歧，2017 年 Tijs Rademakers 离开团队，创建了后来的 Flowable。activiti6 以及 activiti5 代码则交接给 Salaboy 团队维护，activiti6 以及 activiti5 的代码官方已经暂停维护。往后 Salaboy 团队开发了 activiti7 框架，activiti7 内核使用的还是 activiti6，并没有为引擎注入更多的新特性，只是在 Activiti 之外的上层封装了一些应用。直到 Activiti cloud 7.1.0 版本，Activiti cloud 将系统拆分为 Runtime Bundle、Audit Service、Query Service、Cloud Connectors、Application Service、Notification Service。这些工作的主要目的其实就是为了上云，减少对 Activiti 依赖的耦合，需要使用 Activiti 的系统只需要通过调用 http 接口的方式来实现工作流能力的整合，将工作流业务托管上云。</p>
<p>Flowable<br>
Flowable 是基于 activiti6 衍生出来的版本，目前最新版本是 v6.7.0。开发团队是从 Activiti 中分裂出来的，修复了一众 activiti6 的 bug，并在其基础上实现了 DMN 支持，BPEL 支持等。相对开源版，其商业版的功能会更强大。Flowable 是一个使用 Java 编写的轻量级业务流程引擎，使用 Apache V2 license 协议开源。2016 年 10 月，Activiti 工作流引擎的主要开发者离开 Alfresco 公司并在 Activiti 分支基础上开启了 Flowable 开源项目。Flowable 项目中包括 BPMN（Business Process Model and Notation）引擎、CMMN（Case Management Model and Notation）引擎、DMN（Decision Model and Notation）引擎和表单引擎（Form Engine）等模块。</p>
<p>Camunda<br>
Camunda 基于 activiti5，所以其保留了 PVM，最新版本 Camunda7.17，开发团队也是从 activiti 中分裂出来的，发展轨迹与 Flowable 相似。通过压力测试验证 Camunda BPMN 引擎性能和稳定性更好。功能比较完善，除了 BPMN，Camunda 还支持 CMMN（案例管理）和 DMN（决策自动化）。Camunda 不仅带有引擎，还带有非常强大的工具，用于建模、任务管理、操作监控和用户管理。</p>
<p>jBPM<br>
jBPM 由 JBoss 公司开发，目前最高版本 7.61.0.Final，不过从 jBPM5 开始已经跟之前不是同一个产品了，jBPM5 的代码基础不是 jBPM4，而是从 Drools Flow 重新开始，基于 Drools Flow 技术在国内市场上用的很少，jBPM4 诞生的比较早，后来 jBPM4 创建者 Tom Baeyens 离开 JBoss 后，加入 Alfresco 后很快推出了新的基于 jBPM4 的开源工作流系统 Activiti，另外 jBPM 以 Hibernate 作为数据持久化 ORM，而 Hibernate 也已不是主流技术。</p>
<p>osworkflow<br>
osworkflow 是一个轻量化的流程引擎，基于状态机机制，数据库表很少，osworkflow 提供的工作流构成元素有：步骤（step）、条件（conditions）、循环（loops）、分支（spilts）、合并（joins）等，但不支持会签、跳转、退回、加签等这些操作，需要自己扩展开发，有一定难度。如果流程比较简单，osworkflow 是很好的选择。</p>
<p>选型建议：</p>
<pre><code>Flowable6 &gt; Activiti7 &gt; Activiti6 &gt; Activiti5 &gt; Camunda &gt; jBPM7
</code></pre>
<h1 id="表单引擎">表单引擎</h1>
<p>表单引擎，也可以称为表单流程，流程表单和工作流表单，为快速实施项目研发的轻量级表单设计工具,是基于Web界面上可视化编辑的表单设计系统。它可以设置数据库的字段和属性，并设置模块的配置。采用表单引擎工具可在不开发和新增加代码的情况下设计出新表单样式，同比程序开发可省掉程序员差不多70%的开发工作量，并且后期维护相对简单，管理方便。</p>
<h2 id="表单构成">表单构成</h2>
<p>表单内容一般由基本信息、逻辑主体、补充说明三部分构成：</p>
<p>基本信息：基本就是常规信息，差不多每个表单都会用到的，例如：发起人、发起组织、发起时间等身份标识，与业务相关的客户基本信息或者合同基本信息等。</p>
<p>逻辑主体：流程的主要部分，相当于流程的详细描述，涉及逻辑交互、数据交互等，比如合同具体成交的业务类型、费用、数量、付款和回款信息等。</p>
<p>补充说明：作为逻辑主体没有表达清楚的补充说明，例如备注、说明、附件等让相关人员将表单没表达清楚的部分表达清楚。</p>
<h2 id="字段设置">字段设置</h2>
<p>字段设置个性化、灵活性越高，流程引擎能面向的用户则更广，能达到的管理要求也更高。</p>
<p>1）字段排版排序：字段排版、排序要符合用户使用习惯，有逻辑关联的字段要放一起，不要隔开；例如：客户姓名后放了一堆合同信息，最后又放一个客户地址，这样填写和审批都不方便，打乱使用者思维；合理的排序在数据列表展示或导出时都省事不少，表单在使用过程中会不断优化调整，优化后的字段页面上也要及时取消，避免增加页面空值字段。</p>
<p>2）字段查看权限：有的字段比如上传的附件资料，不允许某些节点处理人查阅，则会限制查看。</p>
<p>3）字段编辑权限：不是所有字段在所有节点都允许编辑，所以要根据字段的数据管理要求来设置字段在不同节点的编辑属性。</p>
<p>4）字段留痕：字段修改和留痕关联，重要的字段修改后如果找不到修改人只有系统背锅。有的字段在员工节点填写后，上级节点需要再确认修改；或者流程已结束再修改字段内容的情况就需要将修改痕迹保留下来；留痕就是日志，需要考虑痕迹的重要性，如果重要性不高的字段就不必设置留痕，浪费服务器空间。</p>
<p>5）字段只读：自动填充的关联数据有的能修改，有的不能修改，如果有只读这个控制开关便能更好管理，默认情况应该将自动填充的关联数据都设置只读；设置了只读的字段，一定要关闭必填属性，否则当关联数据空值或者关联失败时，用户是无法提交表单的，设计者应该避免犯这种常规错误。</p>
<p>6）修改字段值：很多流程结束后但需要修改页面内容，需要考虑是否允许不通过节点，直接更改页面表单值，如果允许直接修改已有值，那必须得留痕；但应该尽量避免这种情况，如果直接修改已有值会让流程规范变得更难，使用者对于规范会越来越不重视。</p>
<h2 id="关联数据">关联数据</h2>
<p>1）页面字段数据：表单除了要手动输入的数据外，还有很多数据是由其他表单关联过来的；选择关键字段后会自动带出关联数据，有的表单可能一个字段都不填，打开流程所有数据都自动填充了；有的数据也只需要选择关键字段就自动填充；常规人事、行政审批对数据串联要求不高，但财务或者业务，逻辑关联性较强，涉及数据多，数据串联就变得非常重要。</p>
<p>2）流程相关数据：除了自动填充表单字段数据外，还要将影响审批判断但表单上没有的数据体现出来，便于审批；例如项目请款，同一个合同所有的请款历史、项目信息都应该展示出来，让审批人能快速做审批判断。</p>
<h2 id="表单引擎单优点">表单引擎单优点</h2>
<p>1.技术人员在有详细需求文档的情况下，通过表单引擎可快速实现表单功能。</p>
<p>2.轻松维护系统。</p>
<p>3.提高工作效率。即使是个性化的系统定制也可以批量化的实现业务功能。</p>
<p>4.快速更新。您可以随时根据用户要求添加或删除字段和统计信息，摘要以及数据导入和导出，而无需修改任何代码行。可以在半小时内自定义演示，以赢得客户的信任。</p>
<p>5.个性化的DIY系统。使用表单引擎系统快速定义其他系统，例如：行政管理，客户关系，采购管理，请假表单，人事档案等。</p>
<h2 id="表单引擎设计思想">表单引擎设计思想</h2>
<p>基于文件模式的与基于关系型数据库模式的。</p>
<h3 id="基于文件设计的">基于文件设计的</h3>
<p>基于文件设计的思想是，创建表单的时候，首先创建一个文件比如：xxxx.jsp,xxx.aspx,xxx.php 文件。在这个文件上拖放相关的控件，或者加载相关的通用js代码,或者在对字段Input元素做特殊的标记，让表单引擎解析执行。</p>
<p>表单运行时，运行的界面载体是一个Url文件地址，这个地址引用到相关的菜单上去。</p>
<p>基于文件设计思想的表单引擎系统，需要由软件开发工作者首先设计好项目需要的网页内容，进行封装和部署后，生成使用者可以编辑的表单结构。因为是定制化开发可满足不同的表单样式、表单模板等的设计，能最大程度的符合企业管理者的需求。</p>
<p>弊端一、文件表单布局排版是固定化的，需要改动就需要联系研发人员进行重新设计页面布局，耗时长。</p>
<p>弊端二、该设计模式不能适用于多种行业的表单需求。如现有的系列OA请假报销等表单文件是不能使用项目管理、公文审批等表单引擎需要的。只能是需要开发者根据后者的表单要求重新研发网页功能，从而导致现有表单系统的不可复用性，以及开发多套表单引擎系统投入的大量的人力研发。</p>
<h3 id="基于关系数据库设计">基于关系数据库设计</h3>
<p>基于关系数据库设计的组成部分是表单设计器、表单解析执行器、表单模板三部分组成。</p>
<p>表单设计器，把表单元素都按照关系表存储到数据库里面，每个表单有一个ID，这个表单ID，挂接到表单的解析执行器上，就可以工作。</p>
<p>表单模板将从表单设计器上设计组件关系存储到数据库中，由各个组件表组成的数据间的关系拼接成表单模板。</p>
<p>表单解析执行器是将表单模板数据进行解析，将解析后的数据形态以网页的形式展现</p>
<p>基于关系数据库的设计模式将表单引擎系统封装为一个设计工具，任何需要的表单只需要在该工具上进行拖拽设计即可，拖拽生成表单数据以数据流的形式存放在数据库中，由系统内置的表单解析器解析和展示填写的内容。该过程无须研发人员改动，表单设计人员可随意使用表单设计工具实现目标表单。</p>
<p>弊端是表单展示为统一风格，较为单调。</p>
<h2 id="表单引擎类型">表单引擎类型</h2>
<pre><code>1. 自由表单
2. 自定义表单
3. 开发者表单
4. Office表单
</code></pre>
<h1 id="表单-流程引擎的关系">表单、流程引擎的关系</h1>
<p>流程引擎与表单引擎的关系，就是车的制动系统与车厢的关系。</p>
<p>汽车的控制系统控制前进、转向、后退、鸣笛、刹车等，流程引擎控制功能有发送、移交、退回、关注、删除等。</p>
<p>汽车的车厢可以填充货物，流程的表单可以传递数据。汽车的控制系统、车厢、货物与流程引擎、表单引擎、表单数据三者的关系类似。</p>
<p>表单引擎与流程引擎，就类似于汽车的控制系统与汽车的车厢一样。</p>
<p>流程 = 控制系统  表单 = 货物盒子  数据 = 货物</p>
<h2 id="引擎测试">引擎测试</h2>

							</div>
	<div class="wow bounceInDown vt-post-tags">
 
				<a href="https://q456qq520.github.io/tag/gZsQlzRtW/" rel="tag">流程引擎</a>	
				 
					</div>						
<nav class="navigation3 post-navigation3" role="navigation">
		
		<div class="nav-links3">
      
		<div class="wow bounceInLeft nav-previous3"><a href="https://q456qq520.github.io/post/flowable-shi-yong-zhu-yi-shi-xiang/" rel="prev"> flowable使用注意事项</a></div>
		 
		 
		<div class="wow bounceInRight nav-next3"><a href="https://q456qq520.github.io/post/gao-xing-neng-mysql/" rel="next"> 高性能Mysql</a></div>
		
		</div>
	</nav>
	<div class="wow rollIn author-info" style="visibility: visible; animation-name: rollIn;">
	<div class="author-avatar pull-left"><img src="https://q456qq520.github.io/images/avatar.png" ></div>
 
	<div class="author-description"><div class="author-title"><div class="author-link" rel="author">LIKECAT</div></div>


	<p class="author-bio">一条小咸鱼</p></div></div>
	
		</div>
		
 
		
</article>

<div id="marlin_lite_about_widget-2" class="wow bounceInUp widget marlin_lite_about_widget" data-wow-delay="0.1s">
		
        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '1e61bc4630cf7e3c0b8e',
    clientSecret: 'd1728142222f511a472443c6e499356387ab3b96',
    repo: 'q456qq520.github.io',
    owner: 'q456qq520',
    admin: ['q456qq520'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          
          
        
		<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://q456qq520.github.io/media/scripts/Valine.min.js'></script>

<div class="comment"></div>
<script>
        new Valine({
            // AV 对象来自上面引入av-min.js(老司机们不要开车➳♡゛扎心了老铁)
            av: AV, 
            el: '.comment',
            lang: 'zh-cn',
            
            
      emoticon_list: ["吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"],
     	
      	
          
        });
    </script> 


   
  
 

		</div>

			</div>
			


<div class="tocc col l3 hide-on-med-and-down">
	
        <div class="toc-widget">
			
            <div class="toc-title"></div>
			
            <div id="toc-content">
			
			
			</div>
        </div>
    </div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.5.0/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '.entry-summary',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('.entry-summary').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
    });
</script>										 

 
       


			</div>
		</div>

		
		 	<footer id="colophon" class="site-footer">

			<div class="container">
	
				<div class="copyright">Powered by <a href="https://blog.csdn.net/weixin_42652031" target="_blank">一条小咸鱼</a><br>Theme:   <a href="https://github.com/alterfang/gridea-theme-pan" target="_blank" title="Pan"><span>Pan</span></a>. Powered by <a href="https://gridea.dev/" target="_blank" title="Gridea"><span>Gridea</span></a></div>		
			</div>
		
		</footer>

</div>

<script src="https://cdn.bootcss.com/fitvids/1.2.0/jquery.fitvids.min.js"></script>
<script type='text/javascript' src='https://q456qq520.github.io/media/scripts/marlin-scripts.js'></script>
 <script src="//tokinx.github.io/lately/lately.min.js"></script>
  <script>jQuery(document).ready(function(){$.lately({'target':'.lately-a,.lately-b,.lately-c'})});</script>
  <style type="text/css">a.back_to_top {
    text-decoration: none;
    position: fixed;
    bottom: 40px;
    right: 30px;
    background: #f0f0f0;
    height: 40px;
    width: 40px;
    border-radius: 50%;
    line-height: 36px;
    font-size: 18px;
    text-align: center;
    transition-duration: .5s;
    transition-propety: background-color;
    display: none;
}

a.back_to_top span {
    color: #888;
}

a.back_to_top:hover {
    cursor: pointer;
    background: #dfdfdf;
}

a.back_to_top:hover span {
    color: #555;
}

@media print, screen and (max-width: 580px) {
    .back_to_top {
        display: none !important;
    }
}



</style><a id="back_to_top" href="#" class="back_to_top"><span><i class="iconfont icon-xiangshang"></i></span>
</a>


<script>$(document).ready((function(_this) {
  return function() {
    var bt;
    bt = $('#back_to_top');
    if ($(document).width() > 480) {
      $(window).scroll(function() {
        var st;
        st = $(window).scrollTop();
        if (st > 30) {
          return bt.css('display', 'block');
        } else {
          return bt.css('display', 'none');
        }
      });
      return bt.click(function() {
        $('body,html').animate({
          scrollTop: 0
        }, 800);
        return false;
      });
    }
  };
})(this));
</script>

		<script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $('.navigation:eq(0)').remove();
                $("").attr("rel" , "external");
                $("a[rel='external'],a[rel='external nofollow']").attr("target","_blank");
                $("a.vi").attr("rel" , "");
                $.viewImage({
                    'target'  : 'img',
                    'exclude' : '.vsmile-icons img,.gallery img',
                    'delay'   : 300
                });
                $.lately({
                    'target' : '.commentmetadata a,.infos time,.post-list time'
                });
                prettyPrint();
                
                $('ul.links li a').each(function(){
                    if($(this).parent().find('.bg').length==0){
                        $(this).parent().append('<!---<div class="bg" style="background-image:url(https://c3.glgoo.top/s2/favicons?domain='+$(this).attr("href")+')"></div>--->')
                    }
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>

</body>
</html>
